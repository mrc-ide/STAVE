<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="STAVE">
<title>The Relational Structure • STAVE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="The Relational Structure">
<meta property="og:description" content="STAVE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">STAVE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-how-it-works">How it works</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-how-it-works">
    <a class="dropdown-item" href="../articles/relational_structure.html">The relational data structure</a>
    <a class="dropdown-item" href="../articles/input_formats.html">Input formats</a>
    <a class="dropdown-item" href="../articles/variant_strings.html">Encoding genetic data</a>
    <a class="dropdown-item" href="../articles/calculating_prevalence.html">Calculating prevalence</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/installation.html">Installation</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/reading_in_data.html">Reading in data and calculating prevalence</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mrc-ide/stave">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>The Relational Structure</h1>
            
      
      
      <div class="d-none name"><code>relational_structure.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="whats-the-issue">What’s the issue?<a class="anchor" aria-label="anchor" href="#whats-the-issue"></a>
</h3>
<p>Imagine you’ve extracted some data on genetic variants from an
academic paper and are now building a table to organize the results.
Often, a single paper will contain multiple entries — for example, each
row might correspond to a different sampling location. To ensure that
others can trace the results back to their original source, you’ll need
to include information about the paper in the table, for example the
author list and year of publication. However, this raises a common
issue: should you duplicate the same details in every row of your
table?</p>
<p>On the one hand, duplicating the information ensures that the variant
counts are always linked to their source, which is crucial for
reproducibility. On the other hand, it introduces redundancy, increasing
file size unnecessarily and heightening the risk of data entry
errors.</p>
</div>
<div class="section level3">
<h3 id="the-solution">The solution<a class="anchor" aria-label="anchor" href="#the-solution"></a>
</h3>
<p>Fortunately, this is a common class of problem, and the well-known
solution is to use a relational database structure. In this approach,
unique IDs are employed to link fields across multiple tables. One table
would store metadata about the paper (e.g., authors, year of publication
etc.), while a second table would hold data about the genetic variants
(e.g., gene name, counts). The two tables would be connected by a
relational key, such that the same key in both tables links related
information. This setup avoids redundancy, minimizes errors, and
maintains a clear link between data and source.</p>
<p>In STAVE, we split data into three tables:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Studies</strong>: This is a record of where the data came
from. This could be academic publications, reports, or other
sources.</li>
<li>
<strong>Surveys</strong>: We define as survey as a discrete instance
of data collection. Survey-level data include information on location
(latitude and longitude) and time (day) of collection. There may be
multiple surveys within a given study, for example different sampling
sites or different collection periods may come from the same academic
publication.</li>
<li>
<strong>Counts</strong>: This is where the aggregate genetic data
are stored. Fields include the name of the variant that was observed
(i.e. the gene, locus, and mutation), how many times it was observed
(the numerator), and how many times it was successfully tested for (the
denominator).</li>
</ol>
<p>These three tables are linked through two sets of keys.</p>
</div>
<div class="section level3">
<h3 id="why-use-an-r-package">Why use an R package?<a class="anchor" aria-label="anchor" href="#why-use-an-r-package"></a>
</h3>
<p>There are many software platforms specifically designed for managing
relational databases, notable examples being MySQL and Oracle. So why is
STAVE written in R? There are few reasons for this:</p>
<ul>
<li>Many downstream tools are written in R, making it convenient to stay
within the same environment.</li>
<li>Although R is missing some of the more advanced features of
solutions tailored to relational databases (e.g. allowing synchronous
editing while avoiding clashes), these are also not needed for this
simple application.</li>
<li>R has excellent capabilities for writing more general functions,
e.g. for visualisation and mapping.</li>
<li>R is my language of choice, making it my fastest option to develop
and maintain this package.</li>
</ul>
<p>The <a href="articles/input_formats.html">next page</a> goes into the
specific formatting requirements of the three linked tables.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bob Verity.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
