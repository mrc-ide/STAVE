<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="STAVE">
<title>Reading in Data and Calculating Prevalence â€¢ STAVE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reading in Data and Calculating Prevalence">
<meta property="og:description" content="STAVE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">STAVE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-how-it-works">How it works</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-how-it-works">
    <a class="dropdown-item" href="../articles/relational_structure.html">The relational data structure</a>
    <a class="dropdown-item" href="../articles/input_formats.html">Input formats</a>
    <a class="dropdown-item" href="../articles/variant_strings.html">Encoding genetic data</a>
    <a class="dropdown-item" href="../articles/calculating_prevalence.html">Calculating prevalence</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/installation.html">Installation</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/reading_in_data.html">Reading in data and calculating prevalence</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mrc-ide/stave">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="reading_in_data_files/kePrint-0.0.1/kePrint.js"></script><link href="reading_in_data_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Reading in Data and Calculating Prevalence</h1>
            
      
      
      <div class="d-none name"><code>reading_in_data.Rmd</code></div>
    </div>

    
    
<p>This tutorial covers the following topics:</p>
<ul>
<li>Creating a new STAVE object</li>
<li>Loading data into this object</li>
<li>Calculating prevalence, with and without ambiguous matches</li>
</ul>
<div class="section level2">
<h2 id="reading-in-data">Reading in data<a class="anchor" aria-label="anchor" href="#reading-in-data"></a>
</h2>
<p>Our input data will take the form of three tables. We will use the
example data that comes loaded with the STAVE package. These tables are
already correctly formatted. If you are using your own data then you
need to match this input format (see <a href="articles/input_formats.html">explanation</a>):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"example_input"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">example_input</span><span class="op">$</span><span class="va">studies</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kbl</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"html"</span>, table.attr <span class="op">=</span> <span class="st">"style='width:100%; white-space: nowrap;'"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">scroll_box</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap;" class="table">
<thead><tr>
<th style="text-align:left;">
study_id
</th>
<th style="text-align:left;">
study_name
</th>
<th style="text-align:left;">
study_type
</th>
<th style="text-align:left;">
authors
</th>
<th style="text-align:right;">
publication_year
</th>
<th style="text-align:left;">
url
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Reduced ex vivo susceptibility of Plasmodium falciparum after oral
artemether-lumefantrine treatment in Mali
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Dama et al
</td>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1186/s12936-017-1700-8" class="external-link uri">https://doi.org/10.1186/s12936-017-1700-8</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">example_input</span><span class="op">$</span><span class="va">surveys</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kbl</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"html"</span>, table.attr <span class="op">=</span> <span class="st">"style='width:100%; white-space: nowrap;'"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">scroll_box</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap;" class="table">
<thead><tr>
<th style="text-align:left;">
study_key
</th>
<th style="text-align:left;">
survey_id
</th>
<th style="text-align:left;">
country_name
</th>
<th style="text-align:left;">
site_name
</th>
<th style="text-align:right;">
latitude
</th>
<th style="text-align:right;">
longitude
</th>
<th style="text-align:left;">
spatial_notes
</th>
<th style="text-align:left;">
collection_start
</th>
<th style="text-align:left;">
collection_end
</th>
<th style="text-align:left;">
collection_day
</th>
<th style="text-align:left;">
time_notes
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Bamako_2014
</td>
<td style="text-align:left;">
Mali
</td>
<td style="text-align:left;">
Koulikoro
</td>
<td style="text-align:right;">
12.612900
</td>
<td style="text-align:right;">
-8.13560
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2014-01-01
</td>
<td style="text-align:left;">
2014-12-31
</td>
<td style="text-align:left;">
2014-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Agago_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Agago
</td>
<td style="text-align:right;">
2.984722
</td>
<td style="text-align:right;">
33.33055
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Arua_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Arua
</td>
<td style="text-align:right;">
3.030000
</td>
<td style="text-align:right;">
30.91000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Kole_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Kole
</td>
<td style="text-align:right;">
2.428611
</td>
<td style="text-align:right;">
32.80111
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Lamwo_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Lamwo
</td>
<td style="text-align:right;">
3.533333
</td>
<td style="text-align:right;">
32.80000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Mubende_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Mubende
</td>
<td style="text-align:right;">
0.557500
</td>
<td style="text-align:right;">
31.39500
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">example_input</span><span class="op">$</span><span class="va">counts</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kbl</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"html"</span>, table.attr <span class="op">=</span> <span class="st">"style='width:100%; white-space: nowrap;'"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">scroll_box</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap;" class="table">
<thead><tr>
<th style="text-align:left;">
study_key
</th>
<th style="text-align:left;">
survey_key
</th>
<th style="text-align:left;">
variant_string
</th>
<th style="text-align:right;">
variant_num
</th>
<th style="text-align:right;">
total_num
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Bamako_2014
</td>
<td style="text-align:left;">
crt:76:T
</td>
<td style="text-align:right;">
130
</td>
<td style="text-align:right;">
170
</td>
</tr>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Bamako_2014
</td>
<td style="text-align:left;">
mdr1:86:Y
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
158
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Agago_2017
</td>
<td style="text-align:left;">
k13:469:Y
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Agago_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Arua_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Kole_2017
</td>
<td style="text-align:left;">
k13:469:Y
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
47
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Kole_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
47
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Lamwo_2017
</td>
<td style="text-align:left;">
k13:469:Y
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Lamwo_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Mubende_2017
</td>
<td style="text-align:left;">
k13:469:F
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
45
</td>
</tr>
</tbody>
</table>
</div>
<p>With the data correctly formatted, we can create a STAVE object and
append the data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create new object</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/STAVE_object.html">STAVE_object</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># append data</span></span>
<span><span class="va">s</span><span class="op">$</span><span class="fu">append_data</span><span class="op">(</span>studies_dataframe <span class="op">=</span> <span class="va">example_input</span><span class="op">$</span><span class="va">studies</span>,</span>
<span>              surveys_dataframe <span class="op">=</span> <span class="va">example_input</span><span class="op">$</span><span class="va">surveys</span>,</span>
<span>              counts_dataframe <span class="op">=</span> <span class="va">example_input</span><span class="op">$</span><span class="va">counts</span><span class="op">)</span></span>
<span><span class="co">#&gt; data correctly appended</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># check how many studies are now loaded</span></span>
<span><span class="va">s</span></span>
<span><span class="co">#&gt; Studies: 2</span></span>
<span><span class="co">#&gt; Surveys: 6</span></span></code></pre></div>
<p>Once data are loaded, we can always view the different tables using
<em>get</em> functions. However, we cannot alter the values
directly.</p>
<p>As a side note, if we want to know all the variants in our loaded
data, we can use the <code>get_variants()</code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span><span class="op">$</span><span class="fu">get_variants</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "crt:76:T"  "k13:469:F" "k13:469:Y" "k13:675:V" "mdr1:86:Y"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculating-prevalence">Calculating prevalence<a class="anchor" aria-label="anchor" href="#calculating-prevalence"></a>
</h2>
<p>We can calculate the prevalence of any variant using
<code>get_prevalence()</code>. This appends all information together
over studies and surveys, with final columns giving the prevalence (%)
and lower and upper 95% CIs:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span><span class="op">$</span><span class="fu">get_prevalence</span><span class="op">(</span><span class="st">"k13:469:Y"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kbl</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"html"</span>, table.attr <span class="op">=</span> <span class="st">"style='width:100%; white-space: nowrap;'"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">scroll_box</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap;" class="table">
<thead><tr>
<th style="text-align:left;">
study_id
</th>
<th style="text-align:left;">
study_name
</th>
<th style="text-align:left;">
study_type
</th>
<th style="text-align:left;">
authors
</th>
<th style="text-align:right;">
publication_year
</th>
<th style="text-align:left;">
url
</th>
<th style="text-align:left;">
survey_id
</th>
<th style="text-align:left;">
country_name
</th>
<th style="text-align:left;">
site_name
</th>
<th style="text-align:right;">
latitude
</th>
<th style="text-align:right;">
longitude
</th>
<th style="text-align:left;">
spatial_notes
</th>
<th style="text-align:left;">
collection_start
</th>
<th style="text-align:left;">
collection_end
</th>
<th style="text-align:left;">
collection_day
</th>
<th style="text-align:left;">
time_notes
</th>
<th style="text-align:right;">
numerator
</th>
<th style="text-align:right;">
denominator
</th>
<th style="text-align:right;">
prevalence
</th>
<th style="text-align:right;">
prevalence_lower
</th>
<th style="text-align:right;">
prevalence_upper
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Reduced ex vivo susceptibility of Plasmodium falciparum after oral
artemether-lumefantrine treatment in Mali
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Dama et al
</td>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1186/s12936-017-1700-8" class="external-link uri">https://doi.org/10.1186/s12936-017-1700-8</a>
</td>
<td style="text-align:left;">
Bamako_2014
</td>
<td style="text-align:left;">
Mali
</td>
<td style="text-align:left;">
Koulikoro
</td>
<td style="text-align:right;">
12.612900
</td>
<td style="text-align:right;">
-8.13560
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2014-01-01
</td>
<td style="text-align:left;">
2014-12-31
</td>
<td style="text-align:left;">
2014-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Agago_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Agago
</td>
<td style="text-align:right;">
2.984722
</td>
<td style="text-align:right;">
33.33055
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
91.59161
</td>
<td style="text-align:right;">
100.00000
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Arua_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Arua
</td>
<td style="text-align:right;">
3.030000
</td>
<td style="text-align:right;">
30.91000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Kole_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Kole
</td>
<td style="text-align:right;">
2.428611
</td>
<td style="text-align:right;">
32.80111
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
92.45143
</td>
<td style="text-align:right;">
100.00000
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Lamwo_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Lamwo
</td>
<td style="text-align:right;">
3.533333
</td>
<td style="text-align:right;">
32.80000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
91.77889
</td>
<td style="text-align:right;">
100.00000
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Mubende_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Mubende
</td>
<td style="text-align:right;">
0.557500
</td>
<td style="text-align:right;">
31.39500
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
7.87051
</td>
</tr>
</tbody>
</table>
</div>
<p>Notice that results are given for every loaded survey, even if there
is no corresponding genetic data to calculate a prevalence. If instead
you only want rows for which there is a non-zero denominator, use the
argument <code>return_full = FALSE</code>.</p>
<p>Here is another example, this time allowing for ambiguous
matches.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span><span class="op">$</span><span class="fu">get_prevalence</span><span class="op">(</span><span class="st">"k13:469:Y"</span>, keep_ambiguous <span class="op">=</span> <span class="cn">TRUE</span>, prev_from_min <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kbl</span><span class="op">(</span>format <span class="op">=</span> <span class="st">"html"</span>, table.attr <span class="op">=</span> <span class="st">"style='width:100%; white-space: nowrap;'"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">scroll_box</span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap;" class="table">
<thead><tr>
<th style="text-align:left;">
study_id
</th>
<th style="text-align:left;">
study_name
</th>
<th style="text-align:left;">
study_type
</th>
<th style="text-align:left;">
authors
</th>
<th style="text-align:right;">
publication_year
</th>
<th style="text-align:left;">
url
</th>
<th style="text-align:left;">
survey_id
</th>
<th style="text-align:left;">
country_name
</th>
<th style="text-align:left;">
site_name
</th>
<th style="text-align:right;">
latitude
</th>
<th style="text-align:right;">
longitude
</th>
<th style="text-align:left;">
spatial_notes
</th>
<th style="text-align:left;">
collection_start
</th>
<th style="text-align:left;">
collection_end
</th>
<th style="text-align:left;">
collection_day
</th>
<th style="text-align:left;">
time_notes
</th>
<th style="text-align:right;">
numerator_min
</th>
<th style="text-align:right;">
numerator_max
</th>
<th style="text-align:right;">
denominator
</th>
<th style="text-align:right;">
prevalence
</th>
<th style="text-align:right;">
prevalence_lower
</th>
<th style="text-align:right;">
prevalence_upper
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Reduced ex vivo susceptibility of Plasmodium falciparum after oral
artemether-lumefantrine treatment in Mali
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Dama et al
</td>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1186/s12936-017-1700-8" class="external-link uri">https://doi.org/10.1186/s12936-017-1700-8</a>
</td>
<td style="text-align:left;">
Bamako_2014
</td>
<td style="text-align:left;">
Mali
</td>
<td style="text-align:left;">
Koulikoro
</td>
<td style="text-align:right;">
12.612900
</td>
<td style="text-align:right;">
-8.13560
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2014-01-01
</td>
<td style="text-align:left;">
2014-12-31
</td>
<td style="text-align:left;">
2014-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Agago_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Agago
</td>
<td style="text-align:right;">
2.984722
</td>
<td style="text-align:right;">
33.33055
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
91.59161
</td>
<td style="text-align:right;">
100.00000
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Arua_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Arua
</td>
<td style="text-align:right;">
3.030000
</td>
<td style="text-align:right;">
30.91000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Kole_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Kole
</td>
<td style="text-align:right;">
2.428611
</td>
<td style="text-align:right;">
32.80111
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
92.45143
</td>
<td style="text-align:right;">
100.00000
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Lamwo_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Lamwo
</td>
<td style="text-align:right;">
3.533333
</td>
<td style="text-align:right;">
32.80000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
91.77889
</td>
<td style="text-align:right;">
100.00000
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
peer_reviewed
</td>
<td style="text-align:left;">
Asua et al
</td>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
<a href="https://doi.org/10.1128/aac.01818-18" class="external-link uri">https://doi.org/10.1128/aac.01818-18</a>
</td>
<td style="text-align:left;">
Mubende_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Mubende
</td>
<td style="text-align:right;">
0.557500
</td>
<td style="text-align:right;">
31.39500
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.00000
</td>
<td style="text-align:right;">
7.87051
</td>
</tr>
</tbody>
</table>
</div>
<p>A <code>min</code> and <code>max</code> numerator are now given.
There is still only a single prevalence estimate and 95% CI, calculated
using either the <code>min</code> or the <code>max</code> values,
specified by the <code>prev_from_min</code> argument.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bob Verity.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
