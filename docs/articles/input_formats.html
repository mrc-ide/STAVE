<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="STAVE">
<title>Input Formats • STAVE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Input Formats">
<meta property="og:description" content="STAVE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">STAVE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-how-it-works">How it works</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-how-it-works">
    <a class="dropdown-item" href="../articles/core_design_principles.html">Core Design Principles</a>
    <a class="dropdown-item" href="../articles/studies_table.html">Studies Table</a>
    <a class="dropdown-item" href="../articles/surveys_table.html">Surveys Table</a>
    <a class="dropdown-item" href="../articles/counts_table.html">Counts Table</a>
    <a class="dropdown-item" href="../articles/counts_format.html">Encoding genetic data</a>
    <a class="dropdown-item" href="../articles/calculating_prevalence.html">Calculating prevalence</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/installation.html">Installation</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/reading_in_data.html">Reading in data and calculating prevalence</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mrc-ide/stave">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="input_formats_files/kePrint-0.0.1/kePrint.js"></script><link href="input_formats_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Input Formats</h1>
            
      
      
      <div class="d-none name"><code>input_formats.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="a-custom-data-class">A custom data class<a class="anchor" aria-label="anchor" href="#a-custom-data-class"></a>
</h2>
<p>STAVE works via a single class (an R6 object) that acts as the main
data container. This class allows users to efficiently import, store,
and manipulate genetic data via specialized member functions.</p>
<p>For example, a new object can be created and data read in like
this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create new object</span></span>
<span><span class="va">s</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/STAVE_object.html">STAVE_object</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># append data using a member function</span></span>
<span><span class="va">s</span><span class="op">$</span><span class="fu">append_data</span><span class="op">(</span>studies_dataframe <span class="op">=</span> <span class="va">example_input</span><span class="op">$</span><span class="va">studies</span>,</span>
<span>              surveys_dataframe <span class="op">=</span> <span class="va">example_input</span><span class="op">$</span><span class="va">surveys</span>,</span>
<span>              counts_dataframe <span class="op">=</span> <span class="va">example_input</span><span class="op">$</span><span class="va">surveys</span><span class="op">)</span></span></code></pre></div>
<p>This example uses the <code>example_input</code> object that comes
pre-loaded with the package. Notice that the <code>append_data()</code>
function is attached to the object, accessed via the <code>$</code>
symbol.</p>
<p>Using a custom class offers several key advantages. Once loaded, all
data remain consolidated within a single object, avoiding fragmentation.
The class structure also ensures the data are <em>encapsulated</em>,
meaning they cannot be directly edited by the user. This built-in
protection minimizes the risk of accidental data corruption.</p>
<p>STAVE performs a battery of rigorous checks on the data during the
import process. These checks cover a wide range of validations, from
ensuring proper character formatting to verifying that prevalences do
not exceed 100%. If the data pass all checks, they are successfully
loaded into the object. If not, the import is rejected, and an
informative error message is provided.</p>
<p>A core principle of STAVE is that it does not modify the input data
during import. For instance, if column headers in your dataset contain
capital letters when only lowercase is allowed, STAVE will
<strong>not</strong> automatically convert them for you — even though it
could! Instead it will reject the import. This strict approach ensures
that users are fully aware of the exact structure of their input data,
meaning there is only a single format used universally by anyone using
STAVE. The downside is that you must conform strictly to this structure
in order to use the package.</p>
<p>The remainder of this page specifies the formatting requirements for
each of the three input tables.</p>
<hr>
</div>
<div class="section level2">
<h2 id="the-studies-table">The <em>Studies</em> table<a class="anchor" aria-label="anchor" href="#the-studies-table"></a>
</h2>
<p>This table captures information about the origin of the data. An
example of a correctly formatted <em>Studies</em> table is given
below:</p>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap; margin-left: auto; margin-right: auto;" class="table table table-hover table-condensed">
<thead><tr>
<th style="text-align:left;">
study_id
</th>
<th style="text-align:left;">
study_label
</th>
<th style="text-align:left;">
description
</th>
<th style="text-align:left;">
access_level
</th>
<th style="text-align:left;">
contributors
</th>
<th style="text-align:left;">
reference
</th>
<th style="text-align:right;">
reference_year
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Reduced ex vivo susceptibility of Plasmodium falciparum after oral
artemether-lumefantrine treatment in Mali
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
public
</td>
<td style="text-align:left;">
Dama et al. 
</td>
<td style="text-align:left;">
<a href="https://pubmed.ncbi.nlm.nih.gov/28148267/" class="external-link uri">https://pubmed.ncbi.nlm.nih.gov/28148267/</a>
</td>
<td style="text-align:right;">
2017
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Changing Molecular Markers of Antimalarial Drug Sensitivity across
Uganda
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
public
</td>
<td style="text-align:left;">
Asua et al. 
</td>
<td style="text-align:left;">
<a href="https://pubmed.ncbi.nlm.nih.gov/30559133/" class="external-link uri">https://pubmed.ncbi.nlm.nih.gov/30559133/</a>
</td>
<td style="text-align:right;">
2019
</td>
</tr>
</tbody>
</table>
</div>
<p>The only mandatory fields are <em>study_id</em> and <em>url</em>.
<strong>Please ensure that URLs are accurate and permanent</strong>, as
they serve as the sole external reference for verifying the origin of
the data.</p>
<p>All other fields are optional, meaning cells can be left blank,
although column headings must still be included. These optional fields
have minimal formatting requirements and are primarily intended for
storing descriptive information to help you quickly identify a study.
The exception is <em>study_type</em>, which must adhere to a predefined
set of options (see below).</p>
<div class="section level3">
<h3 id="study-ids">Study IDs<a class="anchor" aria-label="anchor" href="#study-ids"></a>
</h3>
<p>Study IDs must be “valid identifiers”, meaning they must:</p>
<ul>
<li>Contain only English letters (uppercase or lowercase), numbers
(0-9), or underscores (_).</li>
<li>Not begin with a number or an underscore.</li>
</ul>
<p>Beyond these restrictions, any naming convention can be used.
However, it is recommended to adopt a systematic approach to avoid
potential conflicts. For instance, using generic IDs like “study1” is
not a good idea, as such IDs could overlap with those from other
datasets, causing issues when combining data. A better approach is to
use a concise, descriptive format, such as the first author’s surname
and the year of publication, e.g., Bloggs_2024.</p>
</div>
<div class="section level3">
<h3 id="data-types">Data types<a class="anchor" aria-label="anchor" href="#data-types"></a>
</h3>
<p>Each column has its own rules about data type:</p>
<table class="table table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
Column
</th>
<th style="text-align:left;">
Compulsory
</th>
<th style="text-align:left;">
Type
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;width: 100px; ">
study_id
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Valid identifier (see above)
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
study_name
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Character string
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
study_type
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
One of {‘peer_reviewed’, ‘preprint’, ‘other’, ‘private’}
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
authors
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Character string
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
publication_year
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Positive integer
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
url
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Character string
</td>
</tr>
</tbody>
</table>
<p>If any entries have <em>study_type</em> that is <em>private</em> then
a warning message will be printed when data are imported. This warning
does not prevent data from being loaded, but flags to the user that
private data are present in case this was not intentional.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="the-surveys-table">The <em>Surveys</em> table<a class="anchor" aria-label="anchor" href="#the-surveys-table"></a>
</h2>
<p>The <em>Surveys</em> table captures information about the context
within which data were collected. We can think of a survey here as a
<em>single instance of data collection</em>. An example of a correctly
formatted <em>Surveys</em> table is given below:</p>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap; margin-left: auto; margin-right: auto;" class="table table table-hover table-condensed">
<thead><tr>
<th style="text-align:left;">
study_id
</th>
<th style="text-align:left;">
survey_id
</th>
<th style="text-align:left;">
country_name
</th>
<th style="text-align:left;">
site_name
</th>
<th style="text-align:right;">
latitude
</th>
<th style="text-align:right;">
longitude
</th>
<th style="text-align:left;">
location_method
</th>
<th style="text-align:left;">
location_notes
</th>
<th style="text-align:left;">
collection_start
</th>
<th style="text-align:left;">
collection_end
</th>
<th style="text-align:left;">
collection_day
</th>
<th style="text-align:left;">
time_method
</th>
<th style="text-align:left;">
time_notes
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Dama_2017_Bamako_2014
</td>
<td style="text-align:left;">
Mali
</td>
<td style="text-align:left;">
Koulikoro
</td>
<td style="text-align:right;">
12.612900
</td>
<td style="text-align:right;">
-8.13560
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2014-01-01
</td>
<td style="text-align:left;">
2014-12-31
</td>
<td style="text-align:left;">
2014-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Agago_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Agago
</td>
<td style="text-align:right;">
2.984722
</td>
<td style="text-align:right;">
33.33055
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Arua_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Arua
</td>
<td style="text-align:right;">
3.030000
</td>
<td style="text-align:right;">
30.91000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Kole_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Kole
</td>
<td style="text-align:right;">
2.428611
</td>
<td style="text-align:right;">
32.80111
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Lamwo_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Lamwo
</td>
<td style="text-align:right;">
3.533333
</td>
<td style="text-align:right;">
32.80000
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Mubende_2017
</td>
<td style="text-align:left;">
Uganda
</td>
<td style="text-align:left;">
Mubende
</td>
<td style="text-align:right;">
0.557500
</td>
<td style="text-align:right;">
31.39500
</td>
<td style="text-align:left;">
WWARN lat and long
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-12-31
</td>
<td style="text-align:left;">
2017-07-02
</td>
<td style="text-align:left;">
automated midpoint
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<p>Notice that the <code>study_key</code> links back to the
<em>Studies</em> table. This table must include the fields
<em>latitude</em>, <em>longitude</em>, and <em>collection_day</em>. In
some cases, this information might not be directly available in the raw
data. For example, locations may only be reported at a regional level,
or collection periods might span an entire season. Nonetheless, STAVE
<strong>strictly enforces</strong> the requirement that data must be
provided as a single point in space and time. There are several reasons
for this strict requirement:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Support for spatial modeling methods:</strong> Many spatial
methods, such as those modeling prevalence as a continuous surface in
space and time, rely on precise point-level data. These methods struggle
to accommodate areal data, such as prevalence reported only at the
province level.</li>
<li>
<strong>Avoidance of ambiguity in location reporting:</strong> Using
spatial coordinates eliminates the ambiguities associated with place
names. For instance, “Côte d’Ivoire” could also appear as “Cote
d’Ivoire” (without accents), “Republic of Côte d’Ivoire,” “Ivory Coast,”
or many other variations. This issue is even more pronounced for site
names, where interpretations may vary — for example, the name of a
health facility versus the name of a nearby village. Even standardized
identifiers like <a href="https://www.iso.org/iso-3166-country-codes.html" class="external-link">ISO 3166</a>
country codes can pose challenges, as countries and their political
boundaries may change over time. Latitude and longitude are inherently
stable and precise, making them the most reliable method for identifying
collection locations.</li>
</ol>
<p>Note that the <em>Surveys</em> table includes fields for
<em>country_name</em>, <em>site_name</em>, <em>collection_start</em> and
<em>collection_end</em>, however, these fields are solely for
convenience. They allow users to quickly scan the table to identify
where and when data were collected. Ideally, <strong>they should not be
used for spatial analysis</strong>. A more robust approach would be to
overlay these spatial coordinates with a shapefile (e.g., from <a href="https://gadm.org/" class="external-link">GADM</a>) to determine the country or region of
each survey, and then to use this as the country identifier in the
analysis, rather than the value stored in <em>country_name</em>. This
method enables country-level analysis while avoiding the risks of errors
or ambiguities associated with inconsistent or conflicting country
names.</p>
<p>When exact locations or collection timings are unavailable, data
imputation may be necessary. For example, the centroid of a region could
be used to approximate the spatial location, or the midpoint of a
collection range to estimate the timing. In these cases, the optional
fields <em>spatial_notes</em> and <em>time_notes</em> should be used to
document the methods and assumptions applied during data
preparation.</p>
<div class="section level3">
<h3 id="survey-ids">Survey IDs<a class="anchor" aria-label="anchor" href="#survey-ids"></a>
</h3>
<p>As with Study IDs, Survey IDs must be valid identifiers. The same
survey ID can be reused across different studies, for example two
studies can both include a survey with the ID “south_district”, but if
this ID was found twice within the same study this would throw an error.
This ensures the integrity of the relational links while allowing some
flexibility across studies.</p>
</div>
<div class="section level3">
<h3 id="collection-times">Collection times<a class="anchor" aria-label="anchor" href="#collection-times"></a>
</h3>
<p>Dates are always a tricky issue as there are so many different
possible conventions. STAVE requires that dates be stored as YYYY-MM-DD
format, for example a valid date would be <code>"2024-01-19"</code>.
This avoids confusion caused by regional date formats, for example
MM/DD/YYYY common in the US vs. DD/MM/YYYY common in Europe. It also has
the added advantage that dates are sortable numerically.</p>
<p>Dates should be represented as <em>character strings</em>. There is
no need to convert to a specific <code>Date</code> class using packages
like <code>lubridate</code>.</p>
</div>
<div class="section level3">
<h3 id="data-types-1">Data types<a class="anchor" aria-label="anchor" href="#data-types-1"></a>
</h3>
<p>Each column has its own rules about data type:</p>
<table class="table table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
Column
</th>
<th style="text-align:left;">
Compulsory
</th>
<th style="text-align:left;">
Type
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;width: 100px; ">
study_key
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Valid identifier (see above)
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
survey_id
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Valid identifier (see above)
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
country_name
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Character string
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
site_name
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Character string
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
latitude
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Numeric, from -180 to +180
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
longitude
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Numeric, from -180 to +180
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
spatial_notes
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Character string
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
collection_start
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Valid date string (see above)
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
collection_end
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Valid date string (see above)
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
collection_day
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Valid date string (see above)
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
time_notes
</td>
<td style="text-align:left;width: 50px; ">
N
</td>
<td style="text-align:left;">
Character string
</td>
</tr>
</tbody>
</table>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="the-counts-table">The <em>Counts</em> table<a class="anchor" aria-label="anchor" href="#the-counts-table"></a>
</h2>
<p>The final table is the <em>Counts</em> table, which stores the
genetic information. An example of a correctly formatted <em>Counts</em>
table is given below:</p>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table style="width:100%; white-space: nowrap; margin-left: auto; margin-right: auto;" class="table table table-hover table-condensed">
<thead><tr>
<th style="text-align:left;">
study_id
</th>
<th style="text-align:left;">
survey_id
</th>
<th style="text-align:left;">
variant_string
</th>
<th style="text-align:right;">
variant_num
</th>
<th style="text-align:right;">
total_num
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Dama_2017_Bamako_2014
</td>
<td style="text-align:left;">
crt:76:T
</td>
<td style="text-align:right;">
130
</td>
<td style="text-align:right;">
170
</td>
</tr>
<tr>
<td style="text-align:left;">
Dama_2017
</td>
<td style="text-align:left;">
Dama_2017_Bamako_2014
</td>
<td style="text-align:left;">
mdr1:86:Y
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
158
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Agago_2017
</td>
<td style="text-align:left;">
k13:469:Y
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Agago_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
42
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Arua_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Kole_2017
</td>
<td style="text-align:left;">
k13:469:Y
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
47
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Kole_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
47
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Lamwo_2017
</td>
<td style="text-align:left;">
k13:469:Y
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Lamwo_2017
</td>
<td style="text-align:left;">
k13:675:V
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
Asua_2019
</td>
<td style="text-align:left;">
Asua_2019_Mubende_2017
</td>
<td style="text-align:left;">
k13:469:F
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
45
</td>
</tr>
</tbody>
</table>
</div>
<p>All columns in this table are compulsory. The <em>variant_string</em>
format is defined in the <a href="https://github.com/mrc-ide/variantstring" class="external-link"><em>variantstring</em>
package</a> - see that package documentation for details. The
<em>variant_num</em> gives the number of times this variant was
observed, and the <em>total_num</em> gives the number of times this
locus or combination of loci was successfully sequenced. You can think
of <em>variant_num</em> as the numerator in a prevalence calculation,
and <em>total_num</em> as the denominator.</p>
<div class="section level3">
<h3 id="data-types-2">Data types<a class="anchor" aria-label="anchor" href="#data-types-2"></a>
</h3>
<p>Each column has its own rules about data type:</p>
<table class="table table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
Column
</th>
<th style="text-align:left;">
Compulsory
</th>
<th style="text-align:left;">
Type
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;width: 100px; ">
study_key
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Valid identifier (see above)
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
variant_string
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Valid variant string
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
variant_num
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Positive integer or zero
</td>
</tr>
<tr>
<td style="text-align:left;width: 100px; ">
total_num
</td>
<td style="text-align:left;width: 50px; ">
Y
</td>
<td style="text-align:left;">
Positive integer
</td>
</tr>
</tbody>
</table>
<hr>
<p>The <a href="articles/counts_format.html">next page</a> shows how to
encode genetic data in the <em>Counts</em> table.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bob Verity.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
